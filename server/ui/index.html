<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Wheel-of-Jeopardy</title>
    </head>
  </head>
  <body>
    <div id="connect">
    </div>
    <div id="title">
    </div>    
    <div id="username">
    <div id="alwaysVisible">
      <img class="title" id="title" src="assets/WheelofJeopardyTitle.png" />
      <img class="wheel" id="wheel" src="assets/Wheel.png" />
      <img class="wheelStopper" id="wheelStopper" src="assets/WheelStopperIcon.png" />
    </div>
    <div id="playerList">
      <img class="player1Icon" id="player1Icon" src="assets/PlayerIcon.png" />
      <img class="player2Icon" id="player2Icon" src="assets/PlayerIcon.png" />
      <img class="player3Icon" id="player3Icon" src="assets/PlayerIcon.png" />
      <div class="player1Name" id="player1Name"><b>Username</b></div>
      <div class="player1Points" id="player1Points"><b>$0</b></div>
      <div class="player2Name" id="player2Name"><b>Username</b></div>
      <div class="player2Points" id="player2Points"><b>$0</b></div>
      <div class="player3Name" id="player3Name"><b>Username</b></div>
      <div class="player3Points" id="player3Points"><b>$0</b></div>
    </div>
    <div id="connectScreen">
      <img class="connectButton" id="connectButton" src="assets/ConnectButton.png" />
      <img class="username" id="username" src="assets/UsernameTextEntry.png" />
      <input class='usernameInput' id='usernameInput' type='text'/>
    </div>
    <div id="lobbyScreen">
      <div class="hostMenuLabel"><b>Host Menu</b></div>
      <img class="numberOfQuestions" id="numberOfQuestions" src="assets/NumberofQuestionsTextEntry.png" />
      <img class="playButton" id="playButton" src="assets/PlayButton.png" />
      <input class='questionNumberInput' id='questionNumberInput' type='number'/>
      <div class="errorQuestionNumber" id="errorQuestionNumber"><b>**Enter a value 1-30**</b></div>
    </div>
    <div id="spinScreen">
      <img class="spinButton" id="spinButton" src="assets/SpintheWheelButton.png" />
    </div>
    <div id="questionsLeft">
      <img class="questionsLeftBox" id="questionsLeftBox" src="assets/QuestionsRemainingDisplay.png" />
      <div class="questionsLeftNumber" id="questionsLeftNumber"></div>
    </div>
  </body>
  <script src="script.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    // TODO: place code in client class/script to obfuscate 
    var socket = io();
    var playerId = Math.floor(Math.random() * 100);
    var connectAck = document.getElementById('connectButton');

    var player3_Name = document.getElementById('player3Name');
    var player2_Name = document.getElementById('player2Name');
    var player1_Name = document.getElementById('player1Name');


    // when connecting gather ids of players 
    socket.on('connect', () => {
      console.log(socket.id);

      var usernameInput = document.getElementById('usernameInput');

      socket.on('player-ids', (data) => {
        socket.emit('update-event', {ID: playerId, Name: usernameInput.value});
        console.log("Player ID's: ", data);
        // TODO: assign player ids

      })

      socket.on('player-names', (data) => {
        console.log("Player Names: ", data);
        // assign player names to html elements
        player1_Name.value = data.name1;
        player2_Name.value = data.name2;
        player3_Name.value = data.Name3;
        document.getElementById("player2Name").innerHTML = "<b>"+data.Name2+"</b>";
        document.getElementById("player1Name").innerHTML = "<b>"+data.Name1+"</b>";
      })

    });

    connectAck.addEventListener('click', function(e) {
        // TODO: add error handling
        console.log('Username: ', usernameInput);
        socket.emit('connect-event', {ID: playerId, Name: usernameInput.value});
        socket.emit('update-event');
    });

  </script>
</html>
